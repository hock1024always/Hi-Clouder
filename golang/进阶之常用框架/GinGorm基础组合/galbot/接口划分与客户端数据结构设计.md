# 客户端数据结构



```go
// 请求构造
type ServerContext struct {
	Conn     *websocket.Conn
	Message  *model.RequestMessage
	clients  *sync.Map
	UserInfo *model.UserSession // 新增用户会话信息
}

// NewServerContext 构造函数
func NewServerContext(conn *websocket.Conn, message *model.RequestMessage, clients *sync.Map, session *model.UserSession) *ServerContext {
	return &ServerContext{
		Conn:     conn,
		Message:  message,
		clients:  clients,
		UserInfo: session,
	}
}

// 在登录时保存映射
func (ctx *ServerContext) SetUserSession(session *model.UserSession) {
	ctx.UserInfo = session
	// 将连接与用户ID关联（假设clients是map[conn]userID）
	ctx.clients.Store(ctx.Conn, session.UserID)
}
```

