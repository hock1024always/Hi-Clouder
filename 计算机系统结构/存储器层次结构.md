# 存储器层次结构

```mermaid
graph TD
    A[CPU 核心] -->|电信号直接读写<br>无传输延迟| B[寄存器<br>容量：KB 级<br>访问周期：0.1-1ns]
    A -->|高速总线（片内总线）<br>按“缓存行”传输（64字节/行）| C[高速缓存（Cache）<br>L1：核心专属，几KB<br>L2：核心专属，几十KB<br>L3：多核共享，几MB-几十MB<br>访问周期：1-10ns]
    C -->|系统总线（前端总线）<br>按“内存页”传输（4KB/页）| D[主存（内存）<br>容量：GB-上百GB<br>访问周期：50-100ns]
    D -->|I/O 总线（PCIe/SATA）<br>按“扇区”传输（512字节/扇区）| E[磁盘存储<br>HDD：机械盘，毫秒级<br>SSD：固态盘，微秒级<br>容量：TB 级]
    
    %% 标注层级核心特性
    note1[核心特性：速度最快、容量最小、成本最高] -.-> B
    note2[核心特性：速度快、容量小、成本高] -.-> C
    note3[核心特性：速度中等、容量大、成本中等] -.-> D
    note4[核心特性：速度最慢、容量最大、成本最低] -.-> E
```

下面我们按照最靠近cpu向下梳理：

- 寄存器：0个周期就可以获取到
- 高速缓存：1-30个周期
- 主存：50-200个周期
- 磁盘：几千万个周期

然后我们梳理一下这些传输的方式（线路、总线等）：

- CPU 核心 ↔ 寄存器：电信号直接读写，无专用传输总线
- CPU 核心 ↔ 高速缓存（L1/L2/L3）：CPU 片内高速总线，L3 缓存与多核的互连为**片内多核互连架构**
- 高速缓存 ↔ 主存（内存）：系统前端总线（FSB）/ 内存控制器总线
  - 传统设计：内存控制器集成在北桥芯片，通过**前端总线**连接 CPU 与北桥，再通过**内存总线**连接北桥与内存条（主板板间总线，厘米级物理距离）；
  - 现代设计（酷睿 / 锐龙后）：**内存控制器集成在 CPU 内部**，CPU 直接通过**DDR 专用总线**连接主板上的内存条（板间总线，物理距离更短，延迟更低）；
- 主存 ↔ 磁盘存储（HDD/SSD）：计算机 I/O 总线体系
  - 连接HDD（机械盘）：SATA 总线（主板 SATA 接口 → SATA 数据线 → 硬盘 SATA 接口）
  - 连接SSD（固态盘）：PCIe 总线（主流 NVMe 协议）/SATA 总线（主板 PCIe 插槽 → NVMe SSD（直连）；SATA 接口 → SATA SSD）