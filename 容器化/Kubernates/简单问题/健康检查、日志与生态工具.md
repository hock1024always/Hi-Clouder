# 简述Kubernetes中Pod的健康检查方式？

**思路**：

明确两类探针（Liveness / Readiness）及其作用，可提 StartupProbe（可选），强调它们由 kubelet 执行。

**回答**：

Kubernetes 通过 **三种探针（Probes）** 实现 Pod 健康检查，均由 **kubelet 在节点本地执行**：

- **Liveness Probe**：判断容器是否“存活”，失败则 kubelet 重启容器；
- **Readiness Probe**：判断容器是否“就绪”，失败则从 Service 的 Endpoints 中剔除，不接收流量；
- **Startup Probe**（v1.18+）：用于启动慢的应用，在其成功前屏蔽 Liveness/Readiness 检查，避免误杀。
  这三类探针共同保障应用的可用性与稳定性。



# 简述Kubernetes Pod的LivenessProbe探针的常见方式？

**思路**：

列举三种执行方式（exec / httpGet / tcpSocket），说明适用场景。

**回答**：

LivenessProbe 支持三种检测方式：

- **exec**：在容器内执行命令，退出码为 0 表示健康（适用于无网络服务的进程）；
- **httpGet**：向容器指定路径和端口发起 HTTP 请求，状态码 2xx/3xx 视为健康（最常用，如 `/healthz`）；
- **tcpSocket**：尝试与容器指定端口建立 TCP 连接，成功即健康（适用于非 HTTP 服务，如 Redis、MySQL）。
  可根据应用特性灵活选择。



# 简述Kubernetes中，如何使用EFK实现日志的统一管理？

**思路**：

说明 EFK 三组件角色（Elasticsearch 存储、Fluentd 采集、Kibana 展示），强调 DaemonSet 部署 Fluentd。

**回答**：

EFK 是 Kubernetes 常用的日志方案：

- **Fluentd**：以 **DaemonSet** 方式部署在每个节点，收集容器 stdout/stderr 日志（通常挂载 `/var/log/containers`），并解析、过滤后转发；
- **Elasticsearch**：作为后端存储，接收 Fluentd 发送的日志并建立索引；
- **Kibana**：提供 Web UI，用于查询、可视化 Elasticsearch 中的日志数据。

> 注：现代方案中，Fluentd 常被 **Fluent Bit** 替代（更轻量），或直接使用云厂商日志服务（如阿里云 SLS、腾讯云 CLS）。





# 简述Kubernetes镜像的下载策略？

**思路**：

聚焦 `imagePullPolicy` 三个取值及其触发条件，强调默认行为与标签关系。

**回答**：

Kubernetes 通过 Pod 中容器的 `imagePullPolicy` 控制镜像拉取行为：

- **Always**：每次创建 Pod 都拉取镜像（**当镜像标签为 `latest` 时默认为此策略**）；
- **IfNotPresent**：仅当本地不存在该镜像时才拉取（**非 `latest` 标签的默认策略**）；
- **Never**：从不拉取，仅使用本地镜像，若不存在则启动失败。
  合理设置可避免不必要的网络请求或使用过期镜像。



# 简述Kubernetes的负载均衡器？

**思路**：

区分 Service 的三种类型（ClusterIP / NodePort / LoadBalancer），重点说明 LoadBalancer 与云厂商集成。

**回答**：

Kubernetes 通过 **Service** 实现负载均衡：

- **ClusterIP**（默认）：集群内部虚拟 IP，仅在集群内访问；
- **NodePort**：在每个节点开放固定端口，外部可通过 `<NodeIP>:<Port>` 访问；
- **LoadBalancer**：**云厂商（如阿里云 SLB、腾讯云 CLB）自动创建外部负载均衡器**，并将流量转发到后端 Pod，是最常用的对外暴露方式。
  此外，Ingress 可基于七层（HTTP/HTTPS）实现更高级的路由与负载均衡。



# 简述Helm及其优势？

**思路**：

定位为“K8s 包管理器”，强调模板化、版本管理、一键部署等 DevOps 价值。

**回答**：

Helm 是 Kubernetes 的**官方包管理工具**，将应用定义为 **Chart（模板化 YAML 集合）**，其核心优势包括：

- **模板化部署**：通过 `values.yaml` 参数化配置，一套 Chart 可部署多环境（dev/staging/prod）；
- **版本管理**：支持发布（install/upgrade）与回滚（rollback），记录每次变更历史；
- **依赖管理**：Chart 可声明依赖其他 Chart（如 MySQL + App）；
- **生态丰富**：拥有官方 Helm Hub 和大量社区 Charts，加速应用交付。
  在云厂商平台（如 ACK/TKE）中，Helm 是实现 GitOps 与标准化交付的关键工具。