 

- ExternalAPIAdapterConstants 接口主要用来存储外部API适配器插件中使用的各种常量
- ExternalAPIAdapterGlobalConfig 类定义外部API适配器插件的可配置参数
- ExternalAPIAdapterGlobalProperty.java （全局属性类）

# 链路

## 请求的入口

D:\ZStackCode\zstack\premium\plugin-premium\externalapiadapter ... server\ ExternalAPIAdapterServerController.java

```java
/**
 * 外部API适配器服务器控制器
 * 
 * 这个控制器负责接收所有发送到外部API适配器的HTTP请求，
 * 并将其转发给ExternalAPIAdapterServer进行实际处理。
 * 
 * 它支持所有标准的HTTP方法，包括GET、POST、PUT、DELETE、
 * HEAD、OPTIONS、PATCH和TRACE，使外部系统可以通过各种HTTP操作
 * 来访问ZStack的功能。
 */
@Controller
public class ExternalAPIAdapterServerController {

    @Autowired
    private ExternalAPIAdapterServer server;

    /**
     * 处理所有路径的HTTP请求
     * 
     * 此方法作为统一的API入口点，接收所有发往ExternalAPIAdapterConstants.ALL_PATH路径的请求
     * 并将请求委托给ExternalAPIAdapterServer实例进行处理。
     * 
     * @param request HTTP请求对象，包含客户端发送的请求信息
     * @param response HTTP响应对象，用于向客户端发送响应
     * @throws IOException 输入输出异常
     * @throws IllegalAccessException 非法访问异常
     * @throws NoSuchMethodException 方法不存在异常
     * @throws InvocationTargetException 调用目标异常
     */
    @RequestMapping(
            value = ExternalAPIAdapterConstants.ALL_PATH,
            method = {
                    RequestMethod.POST, RequestMethod.PUT, RequestMethod.DELETE, RequestMethod.GET,
                    RequestMethod.HEAD, RequestMethod.OPTIONS, RequestMethod.PATCH, RequestMethod.TRACE
            }
    )
    public void api(HttpServletRequest request, HttpServletResponse response) throws IOException, IllegalAccessException, NoSuchMethodException, InvocationTargetException {
        server.handle(request, response);
    }
}
```

